# Sequences

 A sequence is a user created object that automatically generates unique numbers. 

- A sequence is a shareable object that can be shared by multiple users. 
- It is used generally used for creating primary key value.      
- We can use sequences in anywhere to generate unique numbers. 
- Sequence numbers are stored independent of tables so a sequence can be used by multiple users     and for multiple tables. 
- We can increase efficiency of accessing sequences by caching them in memory. 

More on sequences creation & modification can be found here.

### Use

* NEXTVAL: Returns next sequence value. Returns a unique value in every usage even by different users. 
* CURRVAL: Returns the current sequence value. We must use NEXTVAL at least for one time to be able use CURRVAL keyword in our session. 
* We can use NEXTVAL and CURRVAL in: 
  * SELECT list of a SELECT statement
  * SELECT list of a subquery in an INSERT Statement. 
  * VALUES part of an INSERT Statement. 
  * SET clause of an UPDATE Statement. 
* We can not use NEXTVAL and CURRVAL with
  * A subquery
  * A view query or materialized view query
  * A `SELECT` statement with the `DISTINCT` operator
  * A `SELECT` statement with a `GROUP` `BY` or `ORDER` `BY` clause
  * A `SELECT` statement that is combined with another `SELECT` statement with the `UNION,` `INTERSECT`, or `MINUS` set operator
  * The `WHERE` clause of a `SELECT` statement
  * The condition of a `CHECK` constraint

### Sequence Caching 

* We use caching sequence values in memory for faster access. 
* Specified number of sequence values are cached in memory on the first usage. 
* Next sequence value is retrieved from the cache on any request. 
* After last sequence in the memory (cache) is used, next sequence values are cached. 
* If a sequence is generated by using NEXTVAL or caching and something wrong happens(for example; system crash) after that, these sequence values are lost. 
* If we use a sequence and rollback the statement, we lose these sequence numbers. 
* Because sequences are not tied to any table, the same sequence can be used for multiple tables because of that you may lose the order of a column. (For example; Employee_id: 1,2 ,3,8,9) 